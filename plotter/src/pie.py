import numpy as np
import matplotlib.pyplot as plt
from matplotlib import font_manager as fm
from  matplotlib import cm

def plotPie(x, y, title=None):
    plt.rcParams["font.sans-serif"] = ["SimHei"]
    labels = x
    sizes = y

    fig, axes = plt.subplots(figsize=(8,5),ncols=2) # 设置绘图区域大小
    ax1, ax2 = axes.ravel()

    colors = cm.rainbow(np.arange(len(sizes))/len(sizes)) # colormaps: Paired, autumn, rainbow, gray,spring,Darks
    explode = [0] * len(x)
    explode[0] = 0.04
    patches, texts, autotexts = ax1.pie(sizes, labels=labels, autopct='%1.0f%%',
            shadow=False, startangle=170, colors=colors, labeldistance=1.2,pctdistance=1.03, radius=0.4, explode=explode)
    # labeldistance: 控制labels显示的位置
    # pctdistance: 控制百分比显示的位置
    # radius: 控制切片突出的距离

    ax1.axis('equal')  

    # 重新设置字体大小
    proptease = fm.FontProperties()
    proptease.set_size('xx-small')
    # font size include: ‘xx-small’,x-small’,'small’,'medium’,‘large’,‘x-large’,‘xx-large’ or number, e.g. '12'
    plt.setp(autotexts, fontproperties=proptease)
    plt.setp(texts, fontproperties=proptease)

    ax1.set_title(title, loc='center')

    # ax2 只显示图例（legend）
    ax2.axis('off')
    ax2.legend(patches, labels, loc='center left')

    # plt.title(title)
    plt.tight_layout()
    # plt.savefig("pie_shape_ufo.png", bbox_inches='tight')
    return plt
    # plt.savefig('Demo_project_final.jpg')
    # plt.show()
